<article class='card bg-light m-3 post'>
  <div class='row no-gutters h-100'>
    <aside class='col-md-2 votes text-center'>
      <% if !current_user || post.votes.where(user_id: current_user.id, vote: true).empty? %>
        <%= link_to vote_post_path(post, vote: true), method: 'post' do %>
          <%= fa_icon 'arrow-up' %>
        <% end %>
      <% else %>
        <%= fa_icon 'arrow-up', class: 'disabled' %>
      <% end %>
      </br>
      <%= post.total_votes %>
      </br>
      <% if !current_user || post.votes.where(user_id: current_user.id, vote: false).empty? %>
        <%= link_to vote_post_path(post, vote: false), method: 'post' do %>
          <%= fa_icon 'arrow-down' %>
        <% end %>
      <% else %>
        <%= fa_icon 'arrow-down', class: 'disabled' %>
      <% end %>
    </aside>

    <section class='col-md-10'>
      <header class='card-header'>
        <h5><%= truncate(post.title, length: 50) %></h5>
      </header>
  
      <main class='card-body'>
        <%= render 'posts/post_url', post: post, card: true %>
        <p class='card-text'>
          <%= simple_format(truncate(restrict_newlines(post.description, 5), length: 130)) %>
        </p>
      </main>
  
      <footer class='card-footer'>
        <%= render 'shared/creator_details', obj: post %>
        <nav class='btn-group mt-auto'>
          <%= button_to 'View', post_path(post), method: 'get', class: 'btn btn-sm btn-outline-secondary' %>
          <% if current_user == post.creator %>
            <%= button_to 'Edit', edit_post_path(post), method: 'get', class: 'btn btn-sm btn-outline-secondary border-left-0' %>
          <% end %>
        </nav>
      </footer>
    </section>
  </div>
</article>
